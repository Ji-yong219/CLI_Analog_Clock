#include<stdio.h>
#include<windows.h>
#include<time.h>
#include<math.h>
#include<conio.h>
#include<unistd.h>

#define PI 3.141592653889793238462643383279502884197169399375105820974944592307816406266208998623078164342117067982148086513282306647093844609550582231

void output();
void gotoxy();

typedef struct Pos//좌표 구조체 선언
{
    int xpos;
    int ypos;
}pos;

int main(void)
{
	system("color 0f");//검은바탕에 흰글씨
    system("cls");//화면 지우기
    system("mode con: cols=140 lines=52"); //콘솔 창 크기 조절
    
    output();//출력 함수 호출
    
    return 0;
}

void gotoxy(int x, int y)//좌표 이동 함수
{
    COORD pos = {x,y};//x, y좌표로 지정
	
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), pos);// WIN32API 함수
}

void output()//출력 함수
{
    HANDLE hC = GetStdHandle(STD_OUTPUT_HANDLE);// 콘솔 색 변경 을 위한 api
    
    time_t timer; //timer 변수 선언 (time_t time.h 헤더파일에 선언되어있는 구조체)
    struct tm *t;

    int i,j,k; //반복문 인덱스 변수
    
    int control=0; // 현재 모드 상태 변수
    int needle=0;//0=시 1=분 2=초
    char key=0, key2=0; // 입력한값 저장 변수
    
    int hour=-0 , min=0 , sec=0;  //시간, 분, 초의 변수
    
    int x=-1, y=-1; // 좌표 변수
    
    int corsec=0 , cormin=0 , corhour=0; // 바늘 색깔 변수
    
    int clock[49][87] = { //시계판 모양 배열                                  
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,3,3,1,3,3,3,3,3,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0,0,0,0},
        {0,0,0,0,0,2,2,2,2,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,2,2,2,2,0,0,0,0,0},
        {0,0,0,0,2,2,2,2,1,1,1,1,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,1,1,1,1,2,2,2,2,0,0,0,0},
        {0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0},
        {0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0},
        {0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0},
        {0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0},
        {0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0},
        {0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0},
        {0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0},
        {2,2,2,2,1,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,1,2,2,2,2},
        {2,2,2,2,1,3,3,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,2,2,2,2},
        {2,2,2,2,1,3,3,3,3,3,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,3,3,3,3,3,1,2,2,2,2},
        {2,2,2,2,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,2,2,2,2},
        {2,2,2,2,1,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,1,2,2,2,2},
        {0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0},
        {0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0},
        {0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0},
        {0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0},
        {0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0},
        {0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0},
        {0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0},
        {0,0,0,0,2,2,2,2,1,1,1,1,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,1,1,1,1,2,2,2,2,0,0,0,0},
        {0,0,0,0,0,2,2,2,2,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,2,2,2,2,0,0,0,0,0},
        {0,0,0,0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,3,3,3,3,3,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
    };
    
    int secx=0,  secy=0; //시침, 분침, 초침의 좌표변수
    int minx=0,  miny=0;
    int hourx=0, houry=0;
    
    int phourx,phoury;  //시침, 분침, 초침의 포지션 좌표변수
    int pminx, pminy;
    int psecx, psecy;

    double dsecx =  (secx-43);   // 시침, 분침, 초침의 좌표거리변수
    double dsecy =  (secy-24);
    double dminx =  (minx-43);
    double dminy =  (miny-24);
    double dhourx = (hourx-43);
    double dhoury = (houry-24);
    
    double seclen;  //시침, 분침, 초침의 길이변수
    double minlen;
    double hourlen;
    
    double hourangle;   //시침, 분침, 초침의 각도변수
    double minangle;
    double secangle;
    
    pos position[60] = {//시계판 60개 지점 좌표
        {44,6},{47,6},{51,6},{54,7},{57,7},{59,8},   {62,9},{65,10},{68,11},{71,13},{71,15},   {73,16},{74,18},{76,20},{76,22},{76,25},
          {75,26},{74,28},{74,30},{73,32},{72,34},   {71,36},{68,37},{66,39},{63,40},{60,41},  {58,42},{55,42},{51,43},{47,43},{44,43},
          {40,43},{37,43},{33,43},{29,42},{26,41},   {25,40},{22,39},{19,37},{17,36},{15,34},  {14,32},{13,30},{12,28},{11,26},{11,25},
          {11,22},{12,20},{13,18},{14,16},{15,15},   {16,13},{18,11},{21,9},{24,8},{27,8},     {29,7},{33,6},{37,6},{40,6}
    };
    
    gotoxy(0,0);//0,0 좌표 이동
        
        SetConsoleTextAttribute(hC,249);//흰 바탕에 파란 글자
        
        for(i=0 ; i<49 ; i++) // 시계판 출력
        {
            for(j=0 ; j<87 ; j++)
            {
                if(clock[i][j]==0)
                {
                    SetConsoleTextAttribute(hC,119);//밝은 회색
                    printf(" ");
                }
                else if(clock[i][j]==1)
                {
                    SetConsoleTextAttribute(hC,255);//흰색
                    printf(" ");
                }
                else if(clock[i][j]==2)
                {
                    SetConsoleTextAttribute(hC,17);//진한 파란색
                    printf(" ");
                }
                else if(clock[i][j]==3)
                {
                    SetConsoleTextAttribute(hC,0);//검은색
                    printf(" ");
                }
            }
            
                printf("\n");
        }
    
        SetConsoleTextAttribute(hC,15);//검은색 바탕에 흰색 글자
        gotoxy(90,4);
        printf("ㆍ 엔터를 누르면 바늘을 돌릴 수 있습니다."); //오른쪽에 설명
        gotoxy(90,6);
        printf("   다시 엔터를 누르면 돌아갑니다.");
        gotoxy(90,9);
        printf("     방향키 ↑ ↓ : 시침, 분침, 초침 선택");
        gotoxy(90,11);
        printf("            → ← : 바늘 회전");
        gotoxy(90,14);
        printf("ㆍ ESC를 누르면 프로그램을 종료합니다.");
        gotoxy(90,16);
        printf("ㆍ 스페이스바를 누르면 현재 시간으로 동기화합니다.");
        
    while(1)
    {
        if( (timer == time(NULL)) && control!=1) // 바늘 돌리는 모드가 아니면서, 시간이 변하지 않았을 경우
        {
            continue; //다시 진행 (시간이 안변했는데도 계속 출력하는것을 방지)
        }
        if( (kbhit() && control!=1) )//키보드 버퍼에 입력이 있으면서, 바늘 돌리는 모드가 아니면
        {
            key = getch();//key에 입력받은값을 넣음
            
            if(key == 27)//ESC이면 프로그램 종료
            {
                system("color 0f");
                system("cls");
                exit(0);//프로그램 종료
            }
            else if(key == 13)//엔터이면 바늘 돌리기
            {
                control=1;//바늘돌리는 모드
                key=0;
            }
            else if(key == 32)//스페이스바이면 시간 동기화
            {
                control=0;//기본 모드
                key=0;
            }
            
            while(kbhit()) getch();//입력 버퍼 비우기
        }
        
        if(control == 0) // 현재시각 동기화일때
        {
            timer = time(NULL); // 현재 시각을 초 단위로 얻기
        }
        else if( control == 1 ) // 바늘 돌리는 모드이면
        {
                key2 = getch();
                
                if(key2 == 72)// ↑ 
                {
                    needle++;
                    
                    if(needle>=3)
                    {
                        needle=0;
                    }
                }
                else if(key2 == 80)// ↓
                {
                    needle--;
                    
                    if(needle<=-1)
                    {
                        needle=2;
                    }
                }
                else if(key2 == 75)// ←
                {
                    if(needle==0)
                    {
                        timer-=720;
                    }
                    else if(needle==1)
                    {
                        timer-=60;
                    }
                    else if(needle==2)
                    {
                        timer-=1;
                    }
                }
                else if(key2 == 77)// →
                {
                    if(needle==0)
                    {
                        timer+=720;
                    }
                    else if(needle==1)
                    {
                        timer+=60;
                    }
                    else if(needle==2)
                    {
                        timer+=1;
                    }
                }
                else if(key2 == 13)//엔터
                {
                    control=3;//사용자 시간 모드
                }
                else if(key2 == 32)//스페이스바
                {
                    control=0;
                    
                    timer = time(NULL); // 현재 시각을 초 단위로 얻기
                }
                else if(key2 == 27)//ESC
                {
                    system("color 0f");
                    system("cls");
                    exit(0);//프로그램 종료
                }
        }
        
        t = localtime(&timer); // 초 단위의 시간을 분리하여 구조체에 넣기
        
        gotoxy(37,50);
        SetConsoleTextAttribute(hC,11);
        
        if(1)//아래에 디지털시계 출력
        {
            if((t->tm_hour) > 12 )
			{
				if((t->tm_min) < 10)
				{
					printf("%s %2d:0%d :%3d ","오후",(t->tm_hour)-12,t->tm_min,t->tm_sec);
				}
				else
				{
					printf("%s %2d:%d :%3d ","오후",(t->tm_hour)-12,t->tm_min,t->tm_sec);
				}
			}
            else if((t->tm_hour) == 12 )
			{
				if((t->tm_min) < 10)
				{
					printf("%s %2d:0%d :%3d ","오후",12,t->tm_min,t->tm_sec);
				}
				else
				{
					printf("%s %2d:%d :%3d ","오후",12,t->tm_min,t->tm_sec);
				}
			}
            else if((t->tm_hour) == 0 )
			{
				if((t->tm_min) < 10)
				{
					printf("%s %2d:0%d :%3d ","오전",(t->tm_hour)+12,t->tm_min,t->tm_sec);
				}
				else
				{
					printf("%s %2d:%d :%3d ","오전",(t->tm_hour)+12,t->tm_min,t->tm_sec);
				}
			}
			else
			{
				if((t->tm_min) < 10)
				{
					printf("%s %2d:0%d :%3d ","오전",(t->tm_hour),t->tm_min,t->tm_sec);
				}
				else
				{
					printf("%s %2d:%d :%3d ","오전",(t->tm_hour),t->tm_min,t->tm_sec);
				}
			}
        }
        
        for(k=0 ; k<2 ; k++)//시계바늘 출력
        {
            
            if(k==0)
            {
                    corsec=255, cormin=255, corhour=255;//이전 바늘을 지움(하얀색 덮어쓰기)
            }
            else if(k==1)
            {
                min  = (t->tm_min);//현재 분을 받아옴
                sec  = (t->tm_sec);//현재 초를 받아옴
                
                if((t->tm_hour) > 12)//현재 시를 받아옴
                {
                    hour = ((t->tm_hour)-12) * 5;
                }
                else if( (t->tm_hour)==0 )
                {
                    hour = (t->tm_hour);
                }
                else
                {
                    hour = (t->tm_hour)*5;
                }
                if(hour>=60)
                {
                    hour=0;
                }
                
                hour = hour+(min/12);
                
                if(control==1)
                {
                    if(needle==0)
                    {
                        corsec=68;
                        cormin=0;
                        corhour=170;
                    }
                    if(needle==1)
                    {
                        corsec=68;
                        cormin=170;
                        corhour=0;
                    }
                    if(needle==2)
                    {
                        corsec=170;
                        cormin=0;
                        corhour=0;
                    }
                }
                else
                    corsec=68, cormin=0, corhour=0;
            }
            
            hourx = position[hour].xpos , houry = position[hour].ypos;//시 좌표
            minx = position[min].xpos , miny = position[min].ypos;//분 좌표
            secx = position[sec].xpos , secy = position[sec].ypos;//초 좌표
            
            dhourx = (hourx-43);//시계 중앙부터 거리
            dhoury = (houry-24);
            
            dminx = (minx-43);
            dminy = (miny-24);
            
            dsecx = (secx-43);
            dsecy = (secy-24);
            
            hourlen = sqrt((dhourx*dhourx) + (dhoury*dhoury));   //시침 길이
            hourangle = atan2(dhoury,dhourx)*(180/PI);//시침 각도
            
            hourlen = ( hourlen*2/3 );//시침 길이 줄이기
            
            SetConsoleTextAttribute(hC,corhour);
            
            for(i=0 ; i<hourlen -1 ; i++)   // 시침 출력
            {
                phourx=(i * cos( hourangle * -1 *(PI/180)) + 43);//삼각 함수를 이용해서 바늘 좌표 계싼
                
                phoury=(i * sin( hourangle * (PI/180)) + 24);
                
                gotoxy(phourx,phoury);//해당 좌표로 이동
                printf("  ");//출력
            }
              
            minlen = sqrt((dminx*dminx) + (dminy*dminy));   //분침 길이
            minangle = atan2(dminy,dminx)*(180/PI);//분침 각도
            
            
            SetConsoleTextAttribute(hC,cormin);
            
            for(i=0 ; i<minlen-4 ; i++)   // 분침 출력
            {
                pminx=(i * cos( minangle * -1 *(PI/180)) + 43);//삼각 함수를 이용해서 바늘 좌표 계산
                
                pminy=(i * sin( minangle * (PI/180)) + 24);
                
                gotoxy(pminx,pminy);//해당 좌표로 이동
                printf(" ");//출력
            }
            
            seclen = sqrt((dsecx*dsecx) + (dsecy*dsecy));   //초침 길이
            secangle = atan2(dsecy,dsecx)*(180/PI);//초침 각도
            
            SetConsoleTextAttribute(hC,corsec);
            
            for(i=0 ; i<seclen-2 ; i++)   // 초침 출력
            {
                psecx=(i * cos( secangle * -1 *(PI/180)) + 43);//삼각 함수를 이용해서 바늘 좌표 계산
                
                psecy=(i * sin( secangle * (PI/180)) + 24);
                
                gotoxy(psecx,psecy);//해당 좌표로 이동
                printf(" ");//출력
            }
        }
        
        if(control==3)//만약 사용자 지정 시간일 경우
        {
            Sleep(1000);//1초 대기
            timer++;//시간 증가
        }
        
        SetConsoleTextAttribute(hC,240);//흰 바탕에 검은 글자
    }
    
    return ;
}
